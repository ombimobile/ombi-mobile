(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{viRw:function(t,e,n){"use strict";n.r(e),n.d(e,"PagesRoutingModule",(function(){return ot}));var i=n("tyNb"),s=n("F8fz"),o=n("NSnu"),r=n("AUE5"),a=function(t){return t.OFF="off",t.ON="on",t.CURRENT_PASSWORD="current-password",t.EMAIL="email",t.USERNAME="username",t}({}),c=function(t){return t.TEXT="text",t.EMAIL="email",t.PASSWORD="password",t.URL="url",t}({}),l=n("fXoL"),h=n("3Ewt"),u=n("LLt/"),p=n("fPRZ"),b=n("YTkz"),d=n("TEn/");let g=(()=>{class t{constructor(){this.title=""}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=l.Bb({type:t,selectors:[["app-header"]],inputs:{title:"title"},decls:2,vars:1,template:function(t,e){1&t&&(l.Kb(0,"h1"),l.gc(1),l.Jb()),2&t&&(l.xb(1),l.hc(e.title))},styles:["h1[_ngcontent-%COMP%]{margin:55px 0 0 20px;font-size:3em}"]}),t})(),f=(()=>{class t{constructor(){this.label="",this.autocomplete=a.OFF,this.type=c.TEXT,this.required=!1,this.disabled=!1,this.placeholder="",this.value="",this.valueChange=new l.n}ngOnInit(){}updateValue(t){this.value=t,this.valueChange.emit(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=l.Bb({type:t,selectors:[["app-input"]],inputs:{label:"label",autocomplete:"autocomplete",type:"type",required:"required",disabled:"disabled",placeholder:"placeholder",value:"value"},outputs:{valueChange:"valueChange"},decls:4,vars:6,consts:[["position","floating"],[3,"autocomplete","type","required","disabled","value","ionChange"]],template:function(t,e){1&t&&(l.Kb(0,"ion-item"),l.Kb(1,"ion-label",0),l.gc(2),l.Jb(),l.Kb(3,"ion-input",1),l.Sb("ionChange",(function(t){return e.updateValue(t.detail.value)})),l.Jb(),l.Jb()),2&t&&(l.xb(2),l.hc(e.label),l.xb(1),l.Yb("autocomplete",e.autocomplete),l.Yb("type",e.type),l.Yb("required",e.required),l.Yb("disabled",e.disabled),l.Xb("value",e.value))},directives:[d.k,d.l,d.j,d.A],styles:[""]}),t})();var v=n("ofXK");let m=(()=>{class t{constructor(){this.label="",this.size="default",this.disabled=!1,this.color="primary",this.fill="solid",this.action=new l.n}ngOnInit(){}handleClick(t){null==t||t.stopPropagation(),this.action.emit()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=l.Bb({type:t,selectors:[["app-button"]],inputs:{label:"label",size:"size",disabled:"disabled",color:"color",fill:"fill"},outputs:{action:"action"},decls:2,vars:5,consts:[["expand","block",3,"size","disabled","color","fill","click"]],template:function(t,e){1&t&&(l.Kb(0,"ion-button",0),l.Sb("click",(function(t){return e.handleClick(t)})),l.gc(1),l.Jb()),2&t&&(l.Xb("size",e.size)("disabled",e.disabled)("color",e.color)("fill",e.fill),l.xb(1),l.ic(" ",e.label,"\n"))},directives:[d.d],styles:["ion-button[_ngcontent-%COMP%]{text-transform:capitalize;margin:0}"]}),t})();function O(t,e){1&t&&(l.Kb(0,"p"),l.gc(1,"or"),l.Jb())}function w(t,e){if(1&t){const t=l.Lb();l.Kb(0,"app-button",11),l.Sb("action",(function(){return l.bc(t),l.Ub(2).submitWithPlex()})),l.Jb()}if(2&t){const t=l.Ub(2);l.Xb("disabled",!t.hasBaseUrl)}}const C=function(t){return{credentialsContainer:!0,bordered:t}};function M(t,e){if(1&t){const t=l.Lb();l.Kb(0,"div",5),l.Kb(1,"app-input",6),l.Sb("valueChange",(function(e){return l.bc(t),l.Ub().model.username=e})),l.Jb(),l.Kb(2,"app-input",7),l.Sb("valueChange",(function(e){return l.bc(t),l.Ub().model.password=e})),l.Jb(),l.Kb(3,"app-button",8),l.Sb("action",(function(){return l.bc(t),l.Ub().submit()})),l.Jb(),l.fc(4,O,2,0,"p",9),l.fc(5,w,1,1,"app-button",10),l.Jb()}if(2&t){const t=l.Ub();l.Xb("ngClass",l.Zb(9,C,t.hasOauth)),l.xb(1),l.Xb("value",t.model.username)("disabled",!t.hasBaseUrl),l.xb(1),l.Xb("type",t.inputType.PASSWORD)("value",t.model.password)("disabled",!t.hasBaseUrl),l.xb(1),l.Xb("disabled",!t.hasCredentials),l.xb(1),l.Xb("ngIf",t.hasOauth),l.xb(1),l.Xb("ngIf",t.hasOauth)}}let P=(()=>{class t{constructor(t,e,n,i){this.credentials=t,this.auth=e,this.toast=n,this.settings=i,this.model={ombiUrl:"",username:"",password:""},this.validUrl=!1,this.hasOauth=!1}ngOnInit(){this.model.ombiUrl=this.credentials.baseUrl,this.model.username=this.credentials.username,this.model.password=this.credentials.password,this.validUrl=this.settings.get(o.b.URL_IS_VALID),this.hasOauth=this.settings.get(o.b.URL_HAS_OAUTH),this.settings.change.subscribe(()=>{this.validUrl=this.settings.get(o.b.URL_IS_VALID),this.hasOauth=this.settings.get(o.b.URL_HAS_OAUTH)})}submit(){this.credentials.username=this.model.username,this.credentials.password=this.model.password,this.credentials.token="",this.auth.fetchToken().then(t=>this.toast.show(r.a.SUCCESS,`Successfully signed in as ${this.credentials.name}!`)).catch(t=>this.toast.show(r.a.ERROR,"Unable to sign in with these credentials"))}submitWithPlex(){this.auth.triggerPlexOauth().then(t=>this.toast.show(r.a.SUCCESS,`Successfully signed in as ${this.credentials.name}!`)).catch(t=>this.toast.show(r.a.ERROR,"Unable to sign in with Plex"))}baseUrlChange(){clearTimeout(this.baseUrlTimeout),this.baseUrlTimeout=setTimeout(()=>{this.credentials.baseUrl=this.model.ombiUrl,this.auth.updateAuthConfig()},500)}get inputType(){return c}get hasBaseUrl(){return""!=this.model.ombiUrl}get hasCredentials(){return""!=this.model.username&&""!=this.model.password&&this.hasBaseUrl}}return t.\u0275fac=function(e){return new(e||t)(l.Hb(h.a),l.Hb(u.a),l.Hb(p.a),l.Hb(b.a))},t.\u0275cmp=l.Bb({type:t,selectors:[["app-config"]],decls:6,vars:3,consts:[["title","Config"],["scrollY","false"],[1,"form"],["label","Ombi Server URL","placeholder","Ombi Server URL",3,"type","value","valueChange","change"],[3,"ngClass",4,"ngIf"],[3,"ngClass"],["label","Username","placeholder","Username",3,"value","disabled","valueChange"],["label","Password","placeholder","Password",3,"type","value","disabled","valueChange"],["label","Sign in",3,"disabled","action"],[4,"ngIf"],["class","plex","color","light","label","Sign in with Plex",3,"disabled","action",4,"ngIf"],["color","light","label","Sign in with Plex",1,"plex",3,"disabled","action"]],template:function(t,e){1&t&&(l.Kb(0,"ion-header"),l.Ib(1,"app-header",0),l.Jb(),l.Kb(2,"ion-content",1),l.Kb(3,"div",2),l.Kb(4,"app-input",3),l.Sb("valueChange",(function(t){return e.model.ombiUrl=t}))("change",(function(){return e.baseUrlChange()})),l.Jb(),l.fc(5,M,6,11,"div",4),l.Jb(),l.Jb()),2&t&&(l.xb(4),l.Xb("type",e.inputType.URL)("value",e.model.ombiUrl),l.xb(1),l.Xb("ngIf",e.validUrl))},directives:[d.h,g,d.g,f,v.j,v.h,m],styles:[".form[_ngcontent-%COMP%]{margin-top:15px}.form[_ngcontent-%COMP%]   app-button[_ngcontent-%COMP%]{position:relative;top:20px;padding:0 18px;width:100%;display:inline-block}.credentialsContainer.bordered[_ngcontent-%COMP%]{margin:20px 10px 0;padding:12px 0;border:1px solid grey;border-radius:15px}.credentialsContainer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center;color:grey;margin-bottom:0}.credentialsContainer[_ngcontent-%COMP%]   app-button[_ngcontent-%COMP%]{margin-bottom:12px}.credentialsContainer[_ngcontent-%COMP%]   app-button[_ngcontent-%COMP%]:last-of-type{margin-top:-7px;margin-bottom:20px}"]}),t})();class y{constructor(t){this.movie=t,this.type=s.f.MOVIE,this.buttons=[]}get id(){return this.movie.id}get title(){return this.movie.title}get description(){return this.movie.description}get posterUrl(){return this.movie.posterUrl}get tags(){let t=[];return void 0!==this.requested&&t.push({color:this.available||this.approved?"success":this.requested?"warning":"danger",text:this.available?"Available":this.approved?"Approved":this.requested?"Requested":"Not Requested"}),t.push({color:"primary",text:new Date(this.movie.releaseDate).toLocaleDateString()}),t.push({color:"tertiary",text:this.movie.rating+"/10 \u2605"}),t}get available(){return this.movie.available}get requested(){var t;return null===(t=this.movie.request)||void 0===t?void 0:t.requested}get approved(){var t;return null===(t=this.movie.request)||void 0===t?void 0:t.approved}disable(){this.movie.request.requested=!0}set requested(t){this.movie.request.requested=t}}class q{constructor(t){this.tvShow=t,this.type=s.f.TV,this.buttons=[]}get id(){return this.tvShow.id}get title(){return this.tvShow.title}get posterUrl(){return this.tvShow.posterUrl}get description(){return this.tvShow.description}get tags(){return[{color:this.available||this.approved?"success":this.requested||this.partlyAvailable?"warning":"danger",text:this.available?"Available":this.approved?"Approved":this.requested?"Requested":this.partlyAvailable?"Partly Available":"Not Requested"},{color:"primary",text:new Date(this.tvShow.aired).toLocaleDateString()},{text:this.tvShow.status,color:"warning"},{text:this.tvShow.rating+"/10 \u2605",color:"tertiary"},{color:"tertiary",text:this.tvShow.network}]}get available(){return this.tvShow.available}get partlyAvailable(){return this.tvShow.partlyAvailable}get requested(){return this.tvShow.request.requested}get approved(){return this.tvShow.request.approved}set requested(t){this.tvShow.request.requested=t}disable(){this.tvShow.request.requested=!0}}const x=(t,e,n)=>{var i,o;return e==s.f.TV?null===(o=null===(i=t.childRequests)||void 0===i?void 0:i[0])||void 0===o?void 0:o[n]:null==t?void 0:t[n]},S=t=>Array.prototype.concat(...t).sort((t,e)=>e.request.date-t.request.date);var _=n("hD8V");let I=(()=>{class t{constructor(t,e){this.api=t,this.toast=e}list(t=s.f.MOVIE,e=10,n=0,i=s.d.REQUEST_DATE_DESC,o=s.e.NO_FILTER,r=s.c.NO_FILTER){return this.api.get(`/Request/${t}/${e}/${n}/${i}/${o}/${r}`,{},{}).then(e=>this.format(e.collection,t))}search(t=s.f.MOVIE,e){return this.api.get(`/Request/${t}/search/${e}`,{},{}).then(e=>this.format(e,t))}request(t,e){return this.api.post("/Request/"+t,{},this.requestBody(t,e)).then(e=>this.toast.show(e.isError?r.a.ERROR:r.a.SUCCESS,e.isError?e.errorMessage:"Successfully requested "+t))}performAction(t,e,n=0){return this.api[t==s.a.APPROVE?"post":"put"](`/Request/${e}/${t}`,{},{id:n}).then(()=>this.toast.show(r.a.SUCCESS,`Successfully ${t==s.a.APPROVE?"approved":"denied"} request`))}format(t,e){return t.map(t=>{var n,i,o;return{id:(null==t?void 0:t.theMovieDbId)||(null==t?void 0:t.tvDbId),title:t.title,description:t.overview,posterUrl:t.posterPath,request:{id:t.id,requested:!0,approved:x(t,e,"approved"),denied:x(t,e,"denied"),date:new Date(x(t,e,"requestedDate")),user:{alias:null===(n=x(t,e,"requestedUser"))||void 0===n?void 0:n.alias,email:null===(i=x(t,e,"requestedUser"))||void 0===i?void 0:i.email,name:null===(o=x(t,e,"requestedUser"))||void 0===o?void 0:o.userName}},available:t.childRequests?-1==t.childRequests.map(t=>t.available).indexOf([!0]):t.available,type:e,rating:Math.round(e==s.f.MOVIE?t.voteAverage:t.rating)}})}requestBody(t,e){return t==s.f.MOVIE?{theMovieDbId:e,languageCode:"en"}:{firstSeason:!1,latestSeason:!1,requestAll:!0,tvDbId:e}}}return t.\u0275fac=function(e){return new(e||t)(l.Ob(_.a),l.Ob(p.a))},t.\u0275prov=l.Db({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var U=function(t){return t.POPULAR="popular",t.UPCOMING="upcoming",t.TOP_RATED="toprated",t.NOW_PLAYING="nowplaying",t}({});let R=(()=>{class t{constructor(t){this.api=t,this.movieCache={}}list(t=U.POPULAR){return this.api.get("/search/Movie/"+t,{},{}).then(this.format).then(t=>this.cacheResults(t))}search(t){return this.api.post("/search/Movie/",{},{searchTerm:t,languageCode:"en"}).then(this.format).then(t=>this.cacheResults(t))}get movies(){return this.movieCache}cache(t){this.movieCache[t.id]=t}cacheResults(t){return t.forEach(t=>this.movieCache[t.id]=t),t}format(t){return t.map(t=>({id:t.id,title:t.title,description:t.overview,posterUrl:"https://image.tmdb.org/t/p/w300"+t.posterPath,request:{id:t.requestId,requested:t.requested,approved:t.approved,denied:t.denied},releaseDate:t.releaseDate,available:t.available,rating:Math.round(t.voteAverage)}))}}return t.\u0275fac=function(e){return new(e||t)(l.Ob(_.a))},t.\u0275prov=l.Db({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var A=n("mrSG"),J=function(t){return t.POPULAR="popular",t.TRENDING="trending",t.MOST_WATCHED="mostwatched",t.ANTICIPATED="anticipated",t}({});let T=(()=>{class t{constructor(t){this.api=t,this.showCache={}}list(t=J.POPULAR){return this.api.get("/search/Tv/"+t,{},{}).then(this.format).then(t=>Promise.all(t.map(t=>Object(A.a)(this,void 0,void 0,(function*(){var e;return t.posterUrl=null===(e=yield this.getInfo(t.id))||void 0===e?void 0:e.banner,t}))))).then(t=>this.cacheResults(t))}search(t){return this.api.get("/search/Tv/"+t,{},{}).then(this.format).then(t=>Promise.all(t.map(t=>Object(A.a)(this,void 0,void 0,(function*(){var e;return t.posterUrl=null===(e=yield this.getInfo(t.id))||void 0===e?void 0:e.banner,t}))))).then(t=>this.cacheResults(t))}getImage(t){return this.api.get("/Images/tv/"+t,{},{})}cache(t){this.showCache[t.id]=t}getInfo(t){return this.api.get("/search/Tv/info/"+t,{},{})}get shows(){return this.showCache}cacheResults(t){return t.forEach(t=>this.showCache[t.id]=t),t}format(t){return t.map(t=>({id:t.id,title:t.title,description:t.overview,request:{id:t.requestId,requested:t.requested,approved:t.approved,denied:t.denied,type:{all:t.requestAll,firstSeason:t.firstSeason,latestSeason:t.latestSeason},seasons:t.seasonRequests},network:t.network,status:t.status,aired:t.firstAired,available:t.available,partlyAvailable:t.partlyAvailable,rating:Math.round(t.rating)}))}}return t.\u0275fac=function(e){return new(e||t)(l.Ob(_.a))},t.\u0275prov=l.Db({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function K(t,e){if(1&t&&(l.Kb(0,"ion-chip"),l.Kb(1,"ion-label",1),l.gc(2),l.Jb(),l.Jb()),2&t){const t=e.$implicit;l.xb(1),l.Xb("color",t.color),l.xb(1),l.hc(t.text)}}let L=(()=>{class t{constructor(){this.tags=[]}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=l.Bb({type:t,selectors:[["app-tags"]],inputs:{tags:"tags"},decls:1,vars:1,consts:[[4,"ngFor","ngForOf"],["disabled","true",3,"color"]],template:function(t,e){1&t&&l.fc(0,K,3,2,"ion-chip",0),2&t&&l.Xb("ngForOf",e.tags)},directives:[v.i,d.f,d.l],styles:["[_nghost-%COMP%]{overflow-x:scroll;white-space:nowrap;display:block}"]}),t})(),k=(()=>{class t{constructor(t,e,n,i,s){this.requests=t,this.route=e,this.router=n,this.movieService=i,this.tvService=s,this.back=new l.n}ngOnInit(){this.subscription=this.route.paramMap.subscribe(t=>{var e,n,i,o;let r=t.get("type"),a=t.get("id");switch(r){case s.b.TV:(null===(e=this.tvService)||void 0===e?void 0:e.shows[a])?this.content=new q(null===(n=this.tvService)||void 0===n?void 0:n.shows[a]):this.router.navigate(["/"]);break;case s.b.MOVIE:(null===(i=this.movieService)||void 0===i?void 0:i.movies[a])?this.content=new y(null===(o=this.movieService)||void 0===o?void 0:o.movies[a]):this.router.navigate(["/"])}})}ngOnDestroy(){this.subscription.unsubscribe()}get type(){return this.content.type}get label(){return this.content.available?"Available":this.content.requested?"Requested":"Request "+(this.type==s.f.TV?this.type.toUpperCase():this.type)}get color(){return this.content.available?"success":this.content.requested?"warning":"success"}goBack(){this.back.emit()}request(){this.content.requested=!0,this.requests.request(this.content.type,this.content.id).then()}}return t.\u0275fac=function(e){return new(e||t)(l.Hb(I),l.Hb(i.a),l.Hb(i.g),l.Hb(R),l.Hb(T))},t.\u0275cmp=l.Bb({type:t,selectors:[["app-content"]],outputs:{back:"back"},decls:18,vars:8,consts:[["translucent","true"],["slot","start"],["default-href","movies",3,"click"],[1,"content"],[1,"header"],[1,"poster",3,"src"],[1,"title"],["fill","outline",3,"disabled","label","color","action"],[1,"details"],[3,"tags"]],template:function(t,e){1&t&&(l.Kb(0,"ion-header",0),l.Kb(1,"ion-toolbar"),l.Kb(2,"ion-buttons",1),l.Kb(3,"ion-back-button",2),l.Sb("click",(function(){return e.goBack()})),l.Jb(),l.Jb(),l.Kb(4,"ion-title"),l.gc(5),l.Jb(),l.Jb(),l.Jb(),l.Kb(6,"ion-content"),l.Kb(7,"div",3),l.Kb(8,"div",4),l.Ib(9,"img",5),l.Kb(10,"div",6),l.Kb(11,"h1"),l.gc(12),l.Jb(),l.Kb(13,"app-button",7),l.Sb("action",(function(){return e.request()})),l.Jb(),l.Jb(),l.Jb(),l.Kb(14,"div",8),l.Ib(15,"app-tags",9),l.Kb(16,"p"),l.gc(17),l.Jb(),l.Jb(),l.Jb(),l.Jb()),2&t&&(l.xb(5),l.hc(null==e.content?null:e.content.type),l.xb(4),l.Yb("src",null==e.content?null:e.content.posterUrl,l.dc),l.xb(3),l.hc(null==e.content?null:e.content.title),l.xb(1),l.Xb("disabled",(null==e.content?null:e.content.requested)||(null==e.content?null:e.content.available))("label",e.label)("color",e.color),l.xb(2),l.Xb("tags",null==e.content?null:e.content.tags),l.xb(2),l.hc(null==e.content?null:e.content.description))},directives:[d.h,d.w,d.e,d.b,d.c,d.v,d.g,m,L],styles:["[_nghost-%COMP%]   ion-title[_ngcontent-%COMP%]{text-transform:capitalize}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]{margin:10px;font-size:1.2em}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;height:250px;flex-direction:row}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .poster[_ngcontent-%COMP%], [_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{height:100%;display:inline-flex}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{flex-grow:1;flex-direction:column;padding-left:10px;justify-content:space-between}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-top:10px}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]{padding-top:10px}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:10px}"]}),t})(),E=(()=>{class t{constructor(){this.placeholder="",this.change=new l.n}ngOnInit(){}updateValue(t){clearTimeout(this.timeout),this.timeout=setTimeout(()=>{this.change.emit(t)},500)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=l.Bb({type:t,selectors:[["app-search"]],inputs:{placeholder:"placeholder"},outputs:{change:"change"},decls:1,vars:1,consts:[[3,"placeholder","ionChange"]],template:function(t,e){1&t&&(l.Kb(0,"ion-searchbar",0),l.Sb("ionChange",(function(t){return e.updateValue(t.detail.value)})),l.Jb()),2&t&&l.Xb("placeholder",e.placeholder)},directives:[d.r,d.A],styles:[""]}),t})();function X(t,e){if(1&t){const t=l.Lb();l.Kb(0,"app-button",11),l.Sb("action",(function(){l.bc(t);const n=e.$implicit;return l.Ub(2).performAction(n.action)})),l.Jb()}if(2&t){const t=e.$implicit;l.Xb("label",t.label)("color",t.color)("disabled",t.disabled)}}function D(t,e){if(1&t&&(l.Kb(0,"div",9),l.fc(1,X,1,3,"app-button",10),l.Jb()),2&t){const t=l.Ub();l.xb(1),l.Xb("ngForOf",t.content.buttons)}}function V(t,e){if(1&t&&(l.Kb(0,"div",12),l.Ib(1,"app-tags",13),l.Jb()),2&t){const t=l.Ub();l.xb(1),l.Xb("tags",t.content.tags)}}const B=function(t){return{increaseMargin:t,"content-row":!0}};let F=(()=>{class t{constructor(){this.click=new l.n}ngOnInit(){}get hasButtons(){var t,e;return(null===(e=null===(t=this.content)||void 0===t?void 0:t.buttons)||void 0===e?void 0:e.length)>0}performAction(t){this.content[t==s.a.APPROVE?"approve":"deny"](),this.requestsService.performAction(t,this.content.type,this.content.type==s.f.MOVIE?this.content.requestId:this.content.id).then()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=l.Bb({type:t,selectors:[["app-content-row"]],inputs:{content:"content",requestsService:"requestsService"},outputs:{click:"click"},decls:11,vars:8,consts:[[3,"click"],[3,"ngClass"],[1,"content-top"],[1,"poster"],[3,"src"],[1,"info"],[3,"innerHTML"],["class","buttons",4,"ngIf"],["class","content-bottom",4,"ngIf"],[1,"buttons"],["size","default","fill","outline",3,"label","color","disabled","action",4,"ngFor","ngForOf"],["size","default","fill","outline",3,"label","color","disabled","action"],[1,"content-bottom"],[3,"tags"]],template:function(t,e){1&t&&(l.Kb(0,"ion-item",0),l.Sb("click",(function(){return e.click.emit()})),l.Kb(1,"div",1),l.Kb(2,"div",2),l.Kb(3,"div",3),l.Ib(4,"img",4),l.Jb(),l.Kb(5,"div",5),l.Kb(6,"h2"),l.gc(7),l.Jb(),l.Ib(8,"p",6),l.fc(9,D,2,1,"div",7),l.Jb(),l.Jb(),l.fc(10,V,2,1,"div",8),l.Jb(),l.Jb()),2&t&&(l.xb(1),l.Xb("ngClass",l.Zb(6,B,e.hasButtons)),l.xb(3),l.Yb("src",e.content.posterUrl,l.dc),l.xb(3),l.hc(e.content.title),l.xb(1),l.Yb("innerHTML",e.content.description,l.cc),l.xb(1),l.Xb("ngIf",e.hasButtons),l.xb(1),l.Xb("ngIf",!e.hasButtons))},directives:[d.k,v.h,v.j,v.i,m,L],styles:[".content-row[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%}.content-row.increaseMargin[_ngcontent-%COMP%]{margin-bottom:12px}.content-row[_ngcontent-%COMP%]   .content-top[_ngcontent-%COMP%]{display:flex;height:190px}.content-row[_ngcontent-%COMP%]   .content-top[_ngcontent-%COMP%]   .poster[_ngcontent-%COMP%]{flex:0 0 auto;margin:20px 0 15px;padding-right:10px;height:166px}.content-row[_ngcontent-%COMP%]   .content-top[_ngcontent-%COMP%]   .poster[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:100%}.content-row[_ngcontent-%COMP%]   .content-top[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{display:flex;text-align:initial;flex-direction:column;justify-content:space-between;margin-bottom:5px;width:100%}.content-row[_ngcontent-%COMP%]   .content-top[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:5px}.content-row[_ngcontent-%COMP%]   .content-top[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:.5em;word-wrap:break-word;text-overflow:ellipsis;overflow:hidden;flex-grow:1;margin-bottom:8px;font-size:15px}.content-row[_ngcontent-%COMP%]   .content-top[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   p.hasButtons[_ngcontent-%COMP%]{max-height:75px}.content-row[_ngcontent-%COMP%]   .content-top[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]{display:inline-flex;flex-direction:row;align-content:right}.content-row[_ngcontent-%COMP%]   .content-top[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   app-button[_ngcontent-%COMP%]{flex-grow:1}.content-row[_ngcontent-%COMP%]   .content-top[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   app-button[_ngcontent-%COMP%]:not(:first-of-type){margin-left:10px}.content-row[_ngcontent-%COMP%]   .content-bottom[_ngcontent-%COMP%]{display:flex;margin:0 0 8px -3px;width:calc(100% - 12px)}"]}),t})();const $=["*"];let H=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=l.Bb({type:t,selectors:[["app-list-remark"]],ngContentSelectors:$,decls:2,vars:0,template:function(t,e){1&t&&(l.Wb(),l.Kb(0,"p"),l.Vb(1),l.Jb())},styles:["p[_ngcontent-%COMP%]{text-align:center;color:grey;font-style:italic}"]}),t})();function N(t,e){1&t&&l.Ib(0,"ion-progress-bar",7)}function z(t,e){if(1&t){const t=l.Lb();l.Kb(0,"app-content-row",8),l.Sb("click",(function(){l.bc(t);const n=e.$implicit;return l.Ub().showContent(n)})),l.Jb()}if(2&t){const t=e.$implicit,n=l.Ub();l.Xb("content",n.content(t))}}function j(t,e){1&t&&(l.Kb(0,"app-list-remark"),l.gc(1,"No Movies Found"),l.Jb())}let Y=(()=>{class t{constructor(t,e){this.movie=t,this.router=e,this.movies=[],this.searchTerm="",this.isLoading=!1}ngOnInit(){this.fetchAllMovies()}ngOnDestroy(){this.movies=[]}searchChange(t){"string"==typeof t&&(this.searchTerm=t,""!=t&&t?this.searchMovies():this.fetchAllMovies())}fetchAllMovies(){return this.isLoading=!0,this.movie.list().then(t=>(this.movies=t,this.isLoading=!1,t))}searchMovies(){return this.isLoading=!0,this.movie.search(this.searchTerm).then(t=>(this.movies=t,this.isLoading=!1,t))}content(t){return new y(t)}showContent(t){this.router.navigate([s.b.MOVIE,t.id])}refresh(t){(""==this.searchTerm?this.fetchAllMovies():this.searchMovies()).then(()=>t.target.complete())}}return t.\u0275fac=function(e){return new(e||t)(l.Hb(R),l.Hb(i.g))},t.\u0275cmp=l.Bb({type:t,selectors:[["app-movies"]],decls:10,vars:3,consts:[["title","Movies"],["placeholder","Search Movies",3,"change"],["color","primary","type","indeterminate",4,"ngIf"],["slot","fixed",3,"ionRefresh"],["lines","full"],[3,"content","click",4,"ngFor","ngForOf"],[4,"ngIf"],["color","primary","type","indeterminate"],[3,"content","click"]],template:function(t,e){1&t&&(l.Kb(0,"ion-header"),l.Ib(1,"app-header",0),l.Kb(2,"app-search",1),l.Sb("change",(function(t){return e.searchChange(t)})),l.Jb(),l.Jb(),l.Kb(3,"ion-content"),l.fc(4,N,1,0,"ion-progress-bar",2),l.Kb(5,"ion-refresher",3),l.Sb("ionRefresh",(function(t){return e.refresh(t)})),l.Ib(6,"ion-refresher-content"),l.Jb(),l.Kb(7,"ion-list",4),l.fc(8,z,1,1,"app-content-row",5),l.Jb(),l.fc(9,j,2,0,"app-list-remark",6),l.Jb()),2&t&&(l.xb(4),l.Xb("ngIf",e.isLoading),l.xb(4),l.Xb("ngForOf",e.movies),l.xb(1),l.Xb("ngIf",0==e.movies.length&&!e.isLoading))},directives:[d.h,g,E,d.g,v.j,d.o,d.p,d.m,v.i,d.n,F,H],styles:[""]}),t})();class W{constructor(t){this.tags=[],this.request=t}get id(){return this.request.id}get title(){return this.request.title}get description(){return`<b>${this.type.toUpperCase()}</b> requested by\n                <br />\n                <i>${this.request.request.user.name}</i>`}get available(){return this.request.available}get approved(){return this.request.request.approved}get denied(){return this.request.request.denied}get posterUrl(){return this.type==s.f.MOVIE?"https://image.tmdb.org/t/p/w300//"+this.request.posterUrl:this.request.posterUrl}get requested(){return!0}get requestId(){return this.request.request.id}get type(){return this.request.type}get buttons(){let t=[];return t=this.approved?[{label:"Approved",color:"success",action:void 0,disabled:!0}]:this.denied?[{label:"Denied",color:"danger",action:void 0,disabled:!0}]:[{label:"Deny",color:"danger",action:s.a.DENY},{label:"Approve",color:"success",action:s.a.APPROVE}],t}deny(){this.request.request.denied=!0}approve(){this.request.request.approved=!0}disable(){}}function G(t,e){1&t&&l.Ib(0,"ion-progress-bar",7)}function Z(t,e){if(1&t&&l.Ib(0,"app-content-row",8),2&t){const t=e.$implicit,n=l.Ub();l.Xb("content",n.content(t))("requestsService",n.request)}}function Q(t,e){1&t&&(l.Kb(0,"app-list-remark"),l.gc(1,"No Requests Found"),l.Jb())}let tt=(()=>{class t{constructor(t){this.request=t,this.contentList=[],this.searchTerm="",this.isLoading=!1}ngOnInit(){this.fetchAllRequests()}ngOnDestroy(){this.contentList=[]}searchChange(t){this.searchTerm=t,"string"==typeof t&&(""!=this.searchTerm&&this.searchTerm?this.searchRequests():this.fetchAllRequests())}fetchAllRequests(){return this.isLoading=!0,Promise.all([this.request.list(s.f.MOVIE),this.request.list(s.f.TV)]).then(t=>(this.contentList=S(t),this.isLoading=!1,this.contentList))}searchRequests(){return this.isLoading=!0,Promise.all([this.request.search(s.f.MOVIE,this.searchTerm),this.request.search(s.f.TV,this.searchTerm)]).then(t=>(this.contentList=S(t),this.isLoading=!1,this.contentList))}content(t){return new W(t)}get requestType(){return s.f}refresh(t){(""==this.searchTerm?this.fetchAllRequests():this.searchRequests()).then(()=>t.target.complete())}}return t.\u0275fac=function(e){return new(e||t)(l.Hb(I))},t.\u0275cmp=l.Bb({type:t,selectors:[["app-requests"]],decls:10,vars:3,consts:[["title","Requests"],["placeholder","Search Requests",3,"change"],["color","primary","type","indeterminate",4,"ngIf"],["slot","fixed",3,"ionRefresh"],["lines","full"],[3,"content","requestsService",4,"ngFor","ngForOf"],[4,"ngIf"],["color","primary","type","indeterminate"],[3,"content","requestsService"]],template:function(t,e){1&t&&(l.Kb(0,"ion-header"),l.Ib(1,"app-header",0),l.Kb(2,"app-search",1),l.Sb("change",(function(t){return e.searchChange(t)})),l.Jb(),l.Jb(),l.Kb(3,"ion-content"),l.fc(4,G,1,0,"ion-progress-bar",2),l.Kb(5,"ion-refresher",3),l.Sb("ionRefresh",(function(t){return e.refresh(t)})),l.Ib(6,"ion-refresher-content"),l.Jb(),l.Kb(7,"ion-list",4),l.fc(8,Z,1,2,"app-content-row",5),l.Jb(),l.fc(9,Q,2,0,"app-list-remark",6),l.Jb()),2&t&&(l.xb(4),l.Xb("ngIf",e.isLoading),l.xb(4),l.Xb("ngForOf",e.contentList),l.xb(1),l.Xb("ngIf",0==e.contentList.length&&!e.isLoading))},directives:[d.h,g,E,d.g,v.j,d.o,d.p,d.m,v.i,d.n,F,H],styles:[""]}),t})();function et(t,e){1&t&&l.Ib(0,"ion-progress-bar",7)}function nt(t,e){if(1&t){const t=l.Lb();l.Kb(0,"app-content-row",8),l.Sb("click",(function(){l.bc(t);const n=e.$implicit;return l.Ub().showContent(n)})),l.Jb()}if(2&t){const t=e.$implicit,n=l.Ub();l.Xb("content",n.content(t))}}function it(t,e){1&t&&(l.Kb(0,"app-list-remark"),l.gc(1,"No TV Shows Found"),l.Jb())}const st=[{path:s.b.MOVIE,component:Y},{path:s.b.TV,component:(()=>{class t{constructor(t,e){this.tv=t,this.router=e,this.shows=[],this.searchTerm="",this.isLoading=!1}ngOnInit(){this.fetchAllShows()}ngOnDestroy(){this.shows=[]}searchChange(t){"string"==typeof t&&(this.searchTerm=t,""!=t&&t?this.searchShows():this.fetchAllShows())}fetchAllShows(){return this.isLoading=!0,this.tv.list().then(t=>(this.shows=t,this.isLoading=!1,this.shows))}searchShows(){return this.isLoading=!0,this.tv.search(this.searchTerm).then(t=>(this.shows=t,this.isLoading=!1,this.shows))}content(t){return new q(t)}showContent(t){this.router.navigate([s.b.TV,t.id])}refresh(t){(""==this.searchTerm?this.fetchAllShows():this.searchShows()).then(()=>t.target.complete())}}return t.\u0275fac=function(e){return new(e||t)(l.Hb(T),l.Hb(i.g))},t.\u0275cmp=l.Bb({type:t,selectors:[["app-tv"]],decls:10,vars:3,consts:[["title","TV Shows"],["placeholder","Search TV Shows",3,"change"],["color","primary","type","indeterminate",4,"ngIf"],["slot","fixed",3,"ionRefresh"],["lines","full"],[3,"content","click",4,"ngFor","ngForOf"],[4,"ngIf"],["color","primary","type","indeterminate"],[3,"content","click"]],template:function(t,e){1&t&&(l.Kb(0,"ion-header"),l.Ib(1,"app-header",0),l.Kb(2,"app-search",1),l.Sb("change",(function(t){return e.searchChange(t)})),l.Jb(),l.Jb(),l.Kb(3,"ion-content"),l.fc(4,et,1,0,"ion-progress-bar",2),l.Kb(5,"ion-refresher",3),l.Sb("ionRefresh",(function(t){return e.refresh(t)})),l.Ib(6,"ion-refresher-content"),l.Jb(),l.Kb(7,"ion-list",4),l.fc(8,nt,1,1,"app-content-row",5),l.Jb(),l.fc(9,it,2,0,"app-list-remark",6),l.Jb()),2&t&&(l.xb(4),l.Xb("ngIf",e.isLoading),l.xb(4),l.Xb("ngForOf",e.shows),l.xb(1),l.Xb("ngIf",0==e.shows.length&&!e.isLoading))},directives:[d.h,g,E,d.g,v.j,d.o,d.p,d.m,v.i,d.n,F,H],styles:[""]}),t})()},{path:"requests",component:tt},{path:"config",component:P},{path:":type/:id",component:k}];let ot=(()=>{class t{}return t.\u0275mod=l.Fb({type:t}),t.\u0275inj=l.Eb({factory:function(e){return new(e||t)},imports:[[i.i.forChild(st)],i.i]}),t})()}}]);